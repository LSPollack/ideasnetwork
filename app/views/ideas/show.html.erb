<br><br>
<h1><%= @idea.title %></h1>
<p><%= @idea.description %></p>
<h3>Category: <%= @idea.category.name %></h3>
<img src="<%= @idea.main_image %>" class="pitch-image">
<p>
  <b>Image:</b>
  <%= image_tag @idea.idea_image.url %>
</p>

<p><a href="https://www.youtube.com/watch?v=<%= @idea.video_link %>" target="_blank">Watch the video</a></p>

<h3>Feedback requested: <%= @idea.feedback_type %></h3> 

<p>Idea submitted on <%= @idea.created_at.strftime("%b %-d, %Y") %>, by <%= link_to User.find(@idea.user_id).try(:username), user_path(@idea.user_id)  %>
</p><br><br>

<h3>Votes</h3>
<p>Upvotes: <%= @idea.get_upvotes(:vote_scope => 'vote_for_idea').size %></p>
<p>Downvotes: <%= @idea.get_downvotes(:vote_scope => 'vote_for_idea').size %></p>
<p>Vote Score: <%= @idea.get_upvotes(:vote_scope => 'vote_for_idea').size - @idea.get_downvotes(:vote_scope => 'vote_for_idea').size %></p>


<%= link_to "Upvote", like_idea_path(@idea), method: :put %> | 
<%= link_to "Downvote", dislike_idea_path(@idea), method: :put %>

<br><br>

<h3>Originality score</h3>
<%= form_for @idea, url: originality_rating_idea_path(@idea), method: :put, html: { class: "originality_score_form" } do |f| %>

  <%= label_tag :vote_weight, "How original do you think this idea is?" %>
  <%= number_field_tag :vote_weight %>
  <br><br>
  <div class="actions">
    <%= f.submit "Submit" %>
  </div>
<% end %>

<p>Originality Score: <%= @idea.current_originality_rating %></p>

<br><br>

<br><br>

<% if can? :update, @idea %>
<%= link_to 'Edit above details', edit_idea_path(@idea) %> 
<% end %>

<% if can? :destroy, @idea %>
<%= link_to 'Remove this idea', @idea, method: :delete, data: { confirm: 'Are you sure?' } %> |
<% end %>

<%= link_to 'Back to the homepage', ideas_path %>
